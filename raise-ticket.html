<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raise a Ticket</title>

  <!-- Font (same vibe as your old design) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">

  <link rel="icon" href="data:,">

  <style>
    *{ box-sizing:border-box; }

    body{
      margin:0;
      padding:40px 20px;
      font-family:'Inter', sans-serif;

      /* your background */
      background: url("./assets/image.jpg") no-repeat center center fixed;
      background-size: cover;

      color:#333;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
      overflow-x:hidden;
      position: relative;
    }
    body::before{
      content:'';
      position:fixed;
      inset:0;
      background: rgba(236,232,232,0.26);
      z-index:-1;
    }

    /* Home button */
    .home-btn{
      position:fixed;
      top:20px; left:20px;
      background: rgba(255,255,255,0.86);
      padding:10px 18px;
      border-radius:30px;
      border:1px solid #ccc;
      color:#333;
      text-decoration:none;
      font-weight:600;
      transition: all .25s ease;
      z-index:10;
      display:inline-flex;
      align-items:center;
      gap:10px;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .home-btn:hover{
      background:#007bff;
      color:#fff;
      box-shadow:0 10px 26px rgba(0,123,255,.25);
      border-color: rgba(0,123,255,.25);
    }

    /* Title */
    .hero{
      text-align:center;
      margin-top:30px;
      margin-bottom:18px;
      width:100%;
    }
    .hero h1{
      background: linear-gradient(90deg, #02023d,#023075, #4e4ef8);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      font-weight:800;
      letter-spacing: .3px;
      font-size:52px;
      text-shadow:10px 2px 8px rgba(0,0,0,.10);
      margin:0;
      animation: fadeIn 0.9s ease-in-out;
    }
    @keyframes fadeIn{
      0%{opacity:0; transform: translateY(-8px);}
      100%{opacity:1; transform: translateY(0);}
    }

    /* Card */
    .form-card{
      background: rgba(255,255,255,0.62);
      border-radius:20px;
      border:1px solid #60d9fb;
      padding:34px 30px;
      width:100%;
      max-width:760px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.10);
      animation: fadeIn .7s ease-in-out;
      text-align:left;            /* ✅ keep everything left */
    }

    /* Modern field layout */
    .field{
      margin-bottom:18px;
    }

    label{
      display:block;
      margin-bottom:7px;
      font-size:16px;
      color:#1d1d1d;
      font-weight:800;
      text-shadow: rgba(255,255,255,.22) 2px 2px;
      text-align:left;            /* ✅ */
    }
    .req{ color:#ff0000; margin-left:6px; font-weight:900; }

    input[type="text"], select, textarea{
      width:100%;
      padding:14px 16px;
      background:#f9f9f99f;
      border:1px solid #00b4db;
      border-radius:12px;
      color:#181717;
      font-size:15px;
      transition: all .2s ease;
      text-align:left;            /* ✅ */
    }

    select{
      background-color:#f9f9f996;
      color:#333;
      border:1px solid #118dfa;
    }

    input[type="text"]:focus, textarea:focus, select:focus{
      outline:none;
      border-color:#007bff;
      background-color:#ffffff;
      box-shadow:0 0 0 2px rgba(0,123,255,0.2);
    }

    textarea{
      min-height:150px;
      resize: vertical;
    }

    /* Attach area */
    .attachWrap{
      margin-top:6px;
      margin-bottom:8px;
    }
    .attachRow{
      display:flex;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }
    .attachBtn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:12px 18px;
      border-radius:30px;
      font-size:14px;
      font-weight:800;
      cursor:pointer;
      transition:.2s ease;
      background: rgba(255,255,255,0.90);
      border: 1px solid #00b4db;
      color:#004e92;
      user-select:none;
    }
    .attachBtn:hover{
      box-shadow:0 0 15px rgba(0,29,59,0.14);
      transform: translateY(-1px);
    }
    .file-note{
      font-size:12px;
      color:#101010;
      opacity:.9;
    }

    .filesList{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:12px;
      margin-bottom:18px;
    }
    .fileItem{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:10px 12px;
      border:1px solid #ccefff;
      border-radius:12px;
      background: rgba(255,255,255,0.75);
      font-size:13px;
    }
    .fileName{
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 100%;
    }
    .fileRemove{
      color:#fe6767;
      font-weight:900;
      cursor:pointer;
      text-decoration:none;
      flex:0 0 auto;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(254,103,103,.35);
      background: rgba(255,255,255,.75);
    }
    .fileRemove:hover{
      background: rgba(254,103,103,.10);
    }

    /* Buttons */
    .btn-group{
      display:flex;
      justify-content:center;
      gap:15px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .btn-submit, .btn-reset{
      padding:12px 30px;
      border:none;
      border-radius:30px;
      font-size:15px;
      font-weight:800;
      cursor:pointer;
      transition:.2s ease;
      min-width:130px;
    }
    .btn-submit{
      background: linear-gradient(90deg, #0101cf,#024dbf, #5757f7);
      color:#fff;
    }
    .btn-submit:hover{
      box-shadow:0 0 15px rgba(0,29,59,0.35);
      transform: translateY(-1px);
    }
    .btn-reset{
      background:#f0f0f0;
      color:#fe6767;
      border:1px solid #ddd;
    }
    .btn-reset:hover{
      background:#e8e8e8;
      transform: translateY(-1px);
    }

    .powered{
      margin-top:16px;
      display:flex;
      justify-content:flex-end;
      align-items:center;
      gap:8px;
      font-size:12px;
      color:#333;
      opacity:.85;
    }
    .powered img{ width:16px; height:16px; display:block; }

    /* ✅ Hide Zoho's default table UI completely */
    #zohoSupportWebToCase table.zsFormClass{ display:none !important; }

    /* ✅ Hide the native "Choose File" button completely (but keep inputs usable via JS click) */
    .wtcuploadinput{
      position:absolute !important;
      left:-9999px !important;
      width:1px !important;
      height:1px !important;
      opacity:0 !important;
      overflow:hidden !important;
    }
    /* hide Zoho's attach text too (we use our own) */
    #zsBrowseAttachment{ display:none !important; }

    /* Keep Zoho list hidden (we mirror it) */
    #zsFileBrowseAttachments{ display:none !important; }

    /* Keep everything left aligned even if Zoho wrapper uses align=center */
    #zohoSupportWebToCase, #zohoSupportWebToCase form{ text-align:left !important; }

    @media (max-width: 768px){
      .form-card{ padding:28px 18px; }
      .hero h1{ font-size: 2.2rem; }
    }
    @media (max-width: 480px){
      .form-card{ padding:22px 14px; }
      input[type="text"], select, textarea{ font-size:14px; padding:12px; }
      .btn-submit, .btn-reset{ width:100%; }
      .btn-group{ flex-direction:column; gap:10px; }
      .home-btn{ left:12px; top:12px; }
    }
  </style>

  <!-- Zoho dependency + encoder lib -->
  <script src="https://static.zohocdn.com/zohodeskstatic/app/js/jqueryandencoder.ef05974972bf3bca1b87.js"></script>

  <!-- ✅ YOUR ORIGINAL ZOHO SCRIPT (kept, only 2 small safe additions at the bottom: mirror files + attach button click) -->
  <script>
    window.addEventListener('pageshow', function () {
      const submitButton = document.getElementById('zsSubmitButton_1143387000001276021');
      if (submitButton) { submitButton.removeAttribute('disabled'); }
      const captchaTextField = document.forms['zsWebToCase_1143387000001276021']['zsWebFormCaptchaWord'];
      if(window.zsRegenerateCaptcha && captchaTextField && captchaTextField.value) {
        captchaTextField.value = '';
        captchaTextField.focus();
        zsRegenerateCaptcha();
      }
    });

    function trimBoth(str){return jQuery.trim(str);}

    function setAllDependancyFieldsMapping(){
      var mapDependancyLabels = getMapDependenySelectValues(jQuery("[id='property(module)']").val(), "JSON_MAP_DEP_LABELS");
      if(mapDependancyLabels){
        for(var i = 0; i < mapDependancyLabels.length; i++){
          var label = mapDependancyLabels[i];
          var obj = document.forms['zsWebToCase_1143387000001276021'][label];
          if(obj){ setDependent(obj, true); }
        }
      }
    }
    function getMapDependenySelectValues(module, key){
      var dependencyObj = jQuery.parseJSON( jQuery("[id='dependent_field_values_" + module + "']").val() );
      if(dependencyObj == undefined){return dependencyObj;}
      return dependencyObj[key];
    }
    function setDependent(obj, isload){
      var name = obj.id || (obj[0] && obj[0].id) || "";
      var module = jQuery("[id='property(module)']").val();
      var val = "";
      var myObject = getMapDependenySelectValues(module, "JSON_VALUES");
      if(myObject !=undefined){val = myObject[name];}
      var mySelObject = getMapDependenySelectValues(module, "JSON_SELECT_VALUES");
      if(val != null && val != "" && val != "null" && mySelObject){
        var fields = val;
        for(var i in fields){
          if (fields.hasOwnProperty(i)){
            var isDependent = false;
            var label = i;
            var values = fields[i];
            if(label.indexOf(")") > -1){label = label.replace(/\)/g, '_____');}
            if(label.indexOf("(") > -1){label = label.replace(/\(/g, '____');}
            if(label.indexOf(".") > -1){label = label.replace(/\./g, '___');}
            var depObj = document.forms['zsWebToCase_1143387000001276021'][label];
            if(depObj && depObj.options){
              var mapValues = "";
              var selected_val = depObj.value;
              var depLen = depObj.options.length-1;
              for (var n = depLen; n >= 0; n--) {
                if (depObj.options[n].selected){
                  if(mapValues == ""){mapValues = depObj.options[n].value;}
                  else{mapValues = mapValues + ";;;"+depObj.options[n].value;}
                }
              }
              depObj.value = "";
              var selectValues = mySelObject[label];
              for(var k in values){
                var rat = k;
                if(rat == "-None-"){rat = "";}
                if(rat == trimBoth(obj.value)){
                  isDependent = true;
                  depObj.length = 0;
                  var depvalues = values[k];
                  var depLen2 = depvalues.length - 1;
                  for(var j = 0; j <= depLen2; j++){
                    var optionElement = document.createElement("OPTION");
                    var displayValue = depvalues[j];
                    var actualValue = displayValue;
                    if(actualValue == "-None-"){optionElement.value = "";displayValue = "-None-";}
                    else{optionElement.value = actualValue;}
                    optionElement.text = displayValue;
                    if(mapValues != undefined){
                      var mapValue = mapValues.split(";;;");
                      var len = mapValue.length;
                      for(var p = 0; p < len; p++){
                        if(actualValue == mapValue[p]){optionElement.selected = true;}
                      }
                    }
                    depObj.options.add(optionElement);
                  }
                }
              }
              if(!isDependent){
                depObj.length = 0;
                var len2 = selectValues.length;
                for(var jj = 0; jj < len2; jj++){
                  var actualValue2 = selectValues[jj];
                  var optionElement2 = document.createElement("OPTION");
                  if(actualValue2 == "-None-"){optionElement2.value = "";}
                  else{optionElement2.value = selectValues[jj];}
                  optionElement2.text = selectValues[jj];
                  depObj.options.add(optionElement2);
                }
                depObj.value = selected_val;
              }
              if(!isload){setDependent(depObj,false);}
              var jdepObj = jQuery(depObj);
              if(jdepObj.hasClass('select2-offscreen')){jdepObj.select2("val", jdepObj.val());}
            }
          }
        }
      }
    }

    var zsWebFormMandatoryFields = new Array("Contact Name","Email","Mobile Number","Select Your Request","Subject","Description");
    var zsFieldsDisplayLabelArray = new Array("Contact Name","Email","Mobile Number","Select Your Request","Subject","Description");

    function reformatAllDateFields() {
      const dateFields = document.querySelectorAll('.dob-field');
      dateFields.forEach(field => {
        if (field.value && field.value.includes('-')) {
          const parts = field.value.split('-');
          if (parts.length === 3) {
            const [yyyy, mm, dd] = parts;
            field.type= 'text';
            field.value = `${dd}/${mm}/${yyyy}`;
          }
        }
      });
    }

    function zsValidateMandatoryFields(){
      var isError = 0;
      for(var index = 0; index < zsWebFormMandatoryFields.length; index++){
        isError = 0;
        var fieldObject = document.forms['zsWebToCase_1143387000001276021'][zsWebFormMandatoryFields[index]];
        if(fieldObject){
          if(((fieldObject.value).replace(/^\s+|\s+$/g, '')).length == 0){
            alert(zsFieldsDisplayLabelArray[index] +' cannot be empty ');
            fieldObject.focus();
            isError = 1;
            return false;
          }else{
            if(fieldObject.name == 'Email'){
              if(!fieldObject.value.match(/^([\w_][\w\-_.+\'&]*)@(?=.{4,256}$)(([\w]+)([\-_]*[\w])*[\.])+[a-zA-Z]{2,22}$/)){
                isError = 1;
                alert('Enter a valid email-Id');
                fieldObject.focus();
                return false;
              }
            }
          }
          if(fieldObject.nodeName == 'SELECT'){
            if(fieldObject.options[fieldObject.selectedIndex].value == '-None-'){
              alert(zsFieldsDisplayLabelArray[index] +' cannot be none');
              fieldObject.focus();
              isError = 1;
              return false;
            }
          }
          if(fieldObject.type == 'checkbox'){
            if (fieldObject.checked == false){
              alert('Please accept '+zsFieldsDisplayLabelArray[index]);
              fieldObject.focus();
              isError = 1;
              return false;
            }
          }
        }
      }
      if(isError == 0){
        reformatAllDateFields();
        document.getElementById('zsSubmitButton_1143387000001276021').setAttribute('disabled', 'disabled');
      }
      return true;
    }

    var ZSEncoder = {
      encodeForHTML : function(str){if(str && typeof(str)==='string'){return jQuery.encoder.encodeForHTML(str);}return str;},
      encodeForHTMLAttribute : function(str) {if(str && typeof(str)==='string'){return jQuery.encoder.encodeForHTMLAttribute(str);}return str;},
      encodeForJavascript : function(str) {if(str && typeof(str)==='string'){return jQuery.encoder.encodeForJavascript(str);}return str;},
      encodeForCSS : function(str) {if(str && typeof(str)==='string'){return jQuery.encoder.encodeForCSS(str);}return str;}
    };

    var zsAttachedAttachmentsCount = 0;
    var zsAllowedAttachmentLimit = 4;
    var zsAttachmentFileBrowserIdsList = [1, 2, 3, 4, 5];

    function zsRenderBrowseFileAttachment(zsAttachmentObject, zsAttachmentDetails){
      if(zsAttachmentObject != ''){
        if((zsAttachmentDetails.files && (zsAttachmentDetails.files[0].size/(1024*1024))>20)){
          zsAttachmentDetails.value='';
          alert('Maximum allowed file size is 20MB.');
          return;
        }
        if(zsAttachedAttachmentsCount < 5){
          var zsFileName='';
          if((zsAttachmentObject.indexOf('\\') > -1)){
            var zsAttachmentDataSplits = zsAttachmentObject.split('\\');
            zsFileName = zsAttachmentDataSplits[zsAttachmentDataSplits.length - 1];
          }else{
            zsFileName = zsAttachmentObject;
          }
          var extension = zsFileName.split('.').pop().toLowerCase();
          var unSupportedExtensions = ["ade","adp","apk","appx","appxbundle","bat","cab","cer","chm","cmd","com","cpl","dll","dmg","exe","hlp","hta","ins","iso","isp","jar","js","jse","lnk","mde","msc","msi","msix","msixbundle","msp","mst","nsh","pif","ps1","pst","reg","scr","sct","shb","sys","tmp","url","vb","vbe","vbs","vxd","wsc","wsf","wsh","terminal"];
          if(unSupportedExtensions.indexOf(extension)!=-1){
            alert("The file wasn't attached since its extension is not supported.");
            return;
          }

          var zsCurrentAttachmentIdTokens = jQuery(zsAttachmentDetails).attr('id').split('_');
          var zsCurrentAttachmentId = parseInt(zsCurrentAttachmentIdTokens[1]);
          var zsAttachmentIdToBeRemoved = jQuery.inArray(zsCurrentAttachmentId, zsAttachmentFileBrowserIdsList);
          zsAttachmentFileBrowserIdsList.splice(zsAttachmentIdToBeRemoved, 1);
          var zsNextAttachmentId = zsAttachmentFileBrowserIdsList[0];
          var zsnextAttachment = 'zsattachment_'+zsNextAttachmentId;

          jQuery('#zsattachment_'+zsCurrentAttachmentId).hide();
          jQuery('#'+zsnextAttachment).show();

          jQuery('#zsFileBrowseAttachments').append(
            '<div class="filenamecls zsFontClass" id="file_'+zsCurrentAttachmentId+'">'+
              ZSEncoder.encodeForHTML(zsFileName) +
              '<a class="zsfilebrowseAttachment" style="margin-left:10px;" href="javascript:;" id="fileclose_'+zsCurrentAttachmentId+'">X</a>'+
            '</div>'
          );

          zsAttachedAttachmentsCount = zsAttachedAttachmentsCount + 1;
        }
      }
      zsChangeMousePointer();
      // ✅ mirror list into our modern UI
      setTimeout(syncPrettyFilesFromZoho, 0);
    }

    jQuery(document).off('click.fba').on('click.fba', '.zsfilebrowseAttachment', function(){
      var currentlyDeletedElement = jQuery(this).attr('id').split('_')[1];
      jQuery('#zsattachment_'+currentlyDeletedElement).val('');
      jQuery('#zsattachment_'+currentlyDeletedElement).replaceWith(jQuery('#zsattachment_'+currentlyDeletedElement).clone());
      jQuery(this).parent().remove();
      zsAttachedAttachmentsCount = zsAttachedAttachmentsCount - 1;
      zsAttachmentFileBrowserIdsList.push(parseInt(currentlyDeletedElement));
      zsRearrangeFileBrowseAttachments();
      zsChangeMousePointer();
      // ✅ mirror list into our modern UI
      setTimeout(syncPrettyFilesFromZoho, 0);
    });

    function zsRearrangeFileBrowseAttachments(){
      jQuery.each(jQuery('input[type = file]'), function(fileIndex, fileObject){
        fileIndex = fileIndex + 1;
        if(fileIndex == zsAttachmentFileBrowserIdsList[0]){
          jQuery('#zsattachment_'+fileIndex).show();
        }else{
          jQuery('#zsattachment_'+fileIndex).hide();
        }
      });
    }

    function zsOpenFileBrowseAttachment(clickEvent){
      if(zsAttachedAttachmentsCount >= 5){
        clickEvent.preventDefault();
      }
    }

    function zsChangeMousePointer(){
      if(zsAttachedAttachmentsCount >= 5){
        jQuery('#zsMaxLimitMessage').show();
        jQuery('#zsattachment_1,#zsattachment_2,#zsattachment_3,#zsattachment_4,#zsattachment_5').hide();
      }else{
        jQuery('#zsMaxLimitMessage').hide();
        zsRearrangeFileBrowseAttachments();
      }
    }

    function zsResetWebForm(webFormId){
      document.forms['zsWebToCase_'+webFormId].reset();
      document.getElementById('zsSubmitButton_1143387000001276021').removeAttribute('disabled');
      setAllDependancyFieldsMapping();
      zsAttachedAttachmentsCount = 0;
      zsAttachmentFileBrowserIdsList = [1, 2, 3, 4, 5];
      jQuery('#zsFileBrowseAttachments').html('');
      zsRearrangeFileBrowseAttachments();
      zsChangeMousePointer();
      // ✅ clear pretty list
      setTimeout(syncPrettyFilesFromZoho, 0);
    }

    document.addEventListener('readystatechange',function(){
      if(document.readyState === 'complete'){
        setAllDependancyFieldsMapping();
        document.getElementById('zsSubmitButton_1143387000001276021').removeAttribute('disabled');
        zsAttachedAttachmentsCount = 0;
        zsAttachmentFileBrowserIdsList = [1, 2, 3, 4, 5];
        jQuery('#zsFileBrowseAttachments').html('');
        zsRearrangeFileBrowseAttachments();
        zsChangeMousePointer();
        setTimeout(syncPrettyFilesFromZoho, 0);
      }
    });

    /* =========================
       ✅ ADDED: Pretty files mirror (so you get the nice list + remove works)
       ========================= */
    function syncPrettyFilesFromZoho(){
      const pretty = document.getElementById('prettyFiles');
      const zoho = document.getElementById('zsFileBrowseAttachments');
      if(!pretty || !zoho) return;

      pretty.innerHTML = '';
      const items = zoho.querySelectorAll('.filenamecls');

      items.forEach((row) => {
        const nameText = (row.childNodes[0] && row.childNodes[0].textContent) ? row.childNodes[0].textContent.trim() : row.textContent.trim();
        const closeA = row.querySelector('a.zsfilebrowseAttachment');

        const wrap = document.createElement('div');
        wrap.className = 'fileItem';

        const nm = document.createElement('div');
        nm.className = 'fileName';
        nm.textContent = nameText;

        const rm = document.createElement('a');
        rm.className = 'fileRemove';
        rm.textContent = 'Remove';
        rm.href = 'javascript:;';
        rm.addEventListener('click', () => {
          // trigger Zoho remove
          if(closeA) closeA.click();
        });

        wrap.appendChild(nm);
        wrap.appendChild(rm);
        pretty.appendChild(wrap);
      });
    }
  </script>
</head>

<body>

  <!-- ✅ FIX: Use relative home link so it doesn't open C:\ index when testing locally -->
  <a id="returnHome" href="./index.html" class="home-btn">← Return to Home</a>

  <div class="hero">
    <h1>Raise a Ticket</h1>
  </div>

  <div class="form-card">
    <div id="zohoSupportWebToCase" align="center">

      <!-- ✅ KEEP YOUR ORIGINAL FORM TOKENS + FIELD NAMES -->
      <form name="zsWebToCase_1143387000001276021"
            id="zsWebToCase_1143387000001276021"
            action="https://desk.zoho.com/support/WebToCase"
            method="POST"
            onsubmit="return zsValidateMandatoryFields()"
            enctype="multipart/form-data">

        <!-- ✅ unchanged tokens -->
        <input type='hidden' name='xnQsjsdp' value='edbsn09a4f85ea235bc86c8c4c895589a8df4'/>
        <input type='hidden' name='xmIwtLD' value='edbsnc270b248fbbf8316722a8888f6d0717a7e3dde56f571d36f14269f97cf36f418'/>
        <input type='hidden' name='xJdfEaS' value=''/>
        <input type='hidden' name='actionType' value='Q2FzZXM='/>
        <input type="hidden" id="property(module)" value="Cases"/>
        <input type="hidden" id="dependent_field_values_Cases" value="{&#34;JSON_VALUES&#34;:{&#34;CASECF2&#34;:{&#34;CASECF1&#34;:{&#34;Praveen Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Off Plan Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Ayman Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Global Luxury&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Conveyancing&#34;:[&#34;Conveyancing :: Transfer property with Conveyancing&#34;,&#34;Conveyancing :: NOC&#34;,&#34;Conveyancing :: Deal Cancellation&#34;,&#34;Conveyancing :: Form F Creation ( Exclusive Project )&#34;,&#34;Conveyancing :: Others&#34;],&#34;Business Bay Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Commercial Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;],&#34;Dubai Marina Team&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;]}}},&#34;JSON_SELECT_VALUES&#34;:{&#34;CASECF1&#34;:[&#34;Listing :: Create&#34;,&#34;Listing :: Update&#34;,&#34;Listing :: Publish&#34;,&#34;Opportunity :: Create&#34;,&#34;Opportunity :: Update&#34;,&#34;Opportunity :: Close/Reserve&#34;,&#34;Opportunity :: Update Closing&#34;,&#34;Form :: Create&#34;,&#34;Form :: Create A-A Form&#34;,&#34;Form :: Print A-A Form&#34;,&#34;Form :: Update&#34;,&#34;Invoice :: Create&#34;,&#34;Acknowledgement Voucher&#34;,&#34;Tenancy Contract&#34;,&#34;Contract A&#34;,&#34;Escalations / Others&#34;,&#34;Conveyancing :: Transfer property with Conveyancing&#34;,&#34;Conveyancing :: NOC&#34;,&#34;Conveyancing :: Deal Cancellation&#34;,&#34;Conveyancing :: Form F Creation ( Exclusive Project )&#34;,&#34;Conveyancing :: Others&#34;],&#34;CASECF2&#34;:[&#34;Off Plan Team&#34;,&#34;Commercial Team&#34;,&#34;Praveen Team&#34;,&#34;Ayman Team&#34;,&#34;Business Bay Team&#34;,&#34;Global Luxury&#34;,&#34;Dubai Marina Team&#34;,&#34;Conveyancing&#34;]},&#34;JSON_MAP_DEP_LABELS&#34;:[&#34;CASECF2&#34;]}"/>
        <input type='hidden' name='returnURL' value='https://mycbhelp.com/'/>

        <!-- ✅ Your modern UI fields (same Zoho names) -->
        <div class="field">
          <label>Contact Name <span class="req">*</span></label>
          <input type="text" maxlength="120" name="Contact Name" placeholder="Enter your full name">
        </div>

        <div class="field">
          <label>Email <span class="req">*</span></label>
          <input type="text" maxlength="120" name="Email" placeholder="you@example.com">
        </div>

        <div class="field">
          <label>Mobile Number <span class="req">*</span></label>
          <input type="text" maxlength="120" name="Mobile Number" placeholder="05XXXXXXXX">
        </div>

        <div class="field">
          <label>Select Team <span class="req">*</span></label>
          <select name="Select Your Team" id="CASECF2" onchange="setDependent(this,false)">
            <option value="">-- Select Team --</option>
            <option value="Off Plan Team">Off Plan Team</option>
            <option value="Commercial Team">Commercial Team</option>
            <option value="Praveen Team">Praveen Team</option>
            <option value="Ayman Team">Ayman Team</option>
            <option value="Business Bay Team">Business Bay Team</option>
            <option value="Global Luxury">Global Luxury</option>
            <option value="Dubai Marina Team">Dubai Marina Team</option>
            <option value="Conveyancing">Conveyancing</option>
          </select>
        </div>

        <div class="field">
          <label>Select Request <span class="req">*</span></label>
          <select name="Select Your Request" id="CASECF1">
            <option value="">-- Select Request --</option>
          </select>
        </div>

        <div class="field">
          <label>Subject <span class="req">*</span></label>
          <input type="text" maxlength="255" name="Subject" placeholder="Brief summary of your request">
        </div>

        <div class="field">
          <label>Description <span class="req">*</span></label>
          <textarea name="Description" maxlength="3000" placeholder="Detailed description ..."></textarea>
        </div>

        <!-- ✅ Attachment section: ONE working button, no "Choose File" visible -->
        <div class="field attachWrap">
          <label>Attachment (Max 5 files)</label>
          <div class="attachRow">
            <button type="button" class="attachBtn" id="attachBtn">Attach files</button>
            <div class="file-note">Each file must be less than 20MB</div>
          </div>

          <!-- keep Zoho span (hidden by CSS) -->
          <span class="zsFontClass wtcuploadfile" id="zsBrowseAttachment">Attach files</span>

          <!-- ✅ MUST keep Zoho inputs + handlers -->
          <input class="wtcuploadinput" type="file" name="attachment_1" id="zsattachment_1" style="display:block;"
                 onclick="zsOpenFileBrowseAttachment(event)" onchange="zsRenderBrowseFileAttachment(this.value, this)"/>
          <input class="wtcuploadinput" type="file" name="attachment_2" id="zsattachment_2" style="display:none;"
                 onclick="zsOpenFileBrowseAttachment(event)" onchange="zsRenderBrowseFileAttachment(this.value, this)"/>
          <input class="wtcuploadinput" type="file" name="attachment_3" id="zsattachment_3" style="display:none;"
                 onclick="zsOpenFileBrowseAttachment(event)" onchange="zsRenderBrowseFileAttachment(this.value, this)"/>
          <input class="wtcuploadinput" type="file" name="attachment_4" id="zsattachment_4" style="display:none;"
                 onclick="zsOpenFileBrowseAttachment(event)" onchange="zsRenderBrowseFileAttachment(this.value, this)"/>
          <input class="wtcuploadinput" type="file" name="attachment_5" id="zsattachment_5" style="display:none;"
                 onclick="zsOpenFileBrowseAttachment(event)" onchange="zsRenderBrowseFileAttachment(this.value, this)"/>

          <div style="display:flex; gap:10px; margin-top:8px; font-size:12px; opacity:.9;">
            <span id="zsMaxSizeMessage" style="color:black;">Each file can be up to 20MB.</span>
            <span id="zsMaxLimitMessage" style="color:black; display:none;">You can attach up to 5 files.</span>
          </div>

          <!-- Zoho original list (hidden) -->
          <div id="zsFileBrowseAttachments"></div>

          <!-- Pretty list -->
          <div id="prettyFiles" class="filesList"></div>
        </div>

        <div class="btn-group">
          <button type="submit" id="zsSubmitButton_1143387000001276021" class="btn-submit">Submit</button>
          <button type="button" class="btn-reset" onclick="zsResetWebForm('1143387000001276021')">Reset</button>
        </div>

        <div class="powered">
          <span>powered by</span>
          <a target="_blank" rel="noopener noreferrer" href="https://zoho.com/desk">
            <img src="https://static.zohocdn.com/zohodeskstatic/app/images/portalLogo.de847024ebc0131731a3.png" alt="Zoho Desk">
          </a>
        </div>

      </form>
    </div>
  </div>

  <script>
    // ✅ Make Home work both locally and when hosted
    (function fixHomeLink(){
      const a = document.getElementById('returnHome');
      if(!a) return;
      if(location.protocol === 'file:'){
        a.href = './index.html';
      } else {
        // if you host on a domain root, you can use '/'.
        // if hosted in a subfolder, keep './index.html'
        a.href = './index.html';
      }
    })();

    // ✅ ONE working attach button
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('attachBtn');
      if(btn){
        btn.addEventListener('click', () => {
          // pick the next visible Zoho input (it will be display:block)
          const inputs = [
            document.getElementById('zsattachment_1'),
            document.getElementById('zsattachment_2'),
            document.getElementById('zsattachment_3'),
            document.getElementById('zsattachment_4'),
            document.getElementById('zsattachment_5'),
          ].filter(Boolean);

          const visible = inputs.find(i => i.style.display !== 'none');
          if(visible) visible.click();
        });
      }

      // build request dropdown mapping on load
      setAllDependancyFieldsMapping();
    });
  </script>

</body>
</html>
